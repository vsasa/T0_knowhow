<!DOCTYPE openCSVAtlasDef>
<CSVAtlas>
 <CSVMap>
  <Name>roba_map</Name>
  <Table>public.item</Table>
  <Action>Insert</Action>
  <Description>Insert skripta koja služi za import podataka šifrarnika robe fmk u xtuple bazu.</Description>
  <PreSQL>-- briši sve iz sljedećih tabela
DELETE FROM item;
DELETE FROM itemtax;</PreSQL>
  <PostSQL>-- Usluge prebaci na tip usluge "R"
UPDATE item SET item_type = 'R' WHERE item_comments = 'U';
-- resetuj polje comments, ne treba nam više
UPDATE item SET item_comments = '';

-- setuj jedinice mjere
UPDATE item SET item_inv_uom_id = (SELECT uom_id FROM uom WHERE uom_name = upper(item.item_descrip2)) WHERE item_descrip2 &lt;> '' AND upper(item_descrip2) IN (SELECT uom_name FROM uom);
-- resetuj jedinice mjere
UPDATE item SET item_descrip2 = '';

-- setuj poreze na PDV17
INSERT INTO itemtax (itemtax_item_id, itemtax_taxtype_id, itemtax_taxzone_id) 
SELECT item_id, 
   (SELECT taxtype_id FROM taxtype WHERE upper(taxtype_name) = 'PDV17'), 
   (SELECT taxzone_id FROM taxzone WHERE upper(taxzone_code) = 'FBIH') 
FROM item;</PostSQL>
  <CSVMapField>
   <Name>item_number</Name>
   <Type>QString</Type>
   <Column>1</Column>
  </CSVMapField>
  <CSVMapField>
   <Name>item_descrip1</Name>
   <Type>QString</Type>
   <Column>2</Column>
   <IfNull>UseAlternateValue</IfNull>
   <AltValue>NEMA NAZIVA</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_picklist</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>TRUE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_sold</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>TRUE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_active</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>TRUE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_type</Name>
   <Action>UseAlternateValue</Action>
   <AltValue>P</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_exclusive</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_listprice</Name>
   <Type>double</Type>
   <Column>6</Column>
   <IfNull>UseAlternateValue</IfNull>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_config</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_upccode</Name>
   <Type>QString</Type>
   <Column>21</Column>
  </CSVMapField>
  <CSVMapField>
   <Name>item_classcode_id</Name>
   <Type>int</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>41</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_prodcat_id</Name>
   <Type>int</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>37</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_inv_uom_id</Name>
   <Type>int</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>35</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_price_uom_id</Name>
   <Type>int</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>35</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_fractional</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_prodweight</Name>
   <Type>double</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_packweight</Name>
   <Type>double</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_maxcost</Name>
   <Type>double</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_tax_recoverable</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>item_descrip2</Name>
   <Type>QString</Type>
   <Column>3</Column>
   <IfNull>UseEmptyString</IfNull>
  </CSVMapField>
  <CSVMapField>
   <Name>item_comments</Name>
   <Type>QString</Type>
   <Column>8</Column>
   <IfNull>UseEmptyString</IfNull>
  </CSVMapField>
 </CSVMap>
 <CSVMap>
  <Name>roba_itemsite</Name>
  <Table>api.itemsite</Table>
  <Action>Insert</Action>
  <Description>Ovo je insert skripta koja ubacuje svu robu na site 1320</Description>
  <CSVMapField>
   <Name>item_number</Name>
   <Type>QString</Type>
   <Column>1</Column>
  </CSVMapField>
  <CSVMapField>
   <Name>site</Name>
   <Type>QString</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>1320</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>active</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>TRUE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>po_supplied_at_site</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>TRUE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>sold_from_site</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>TRUE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>cost_method</Name>
   <Type>QString</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>Average</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>control_method</Name>
   <Type>QString</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>Regular</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>planner_code</Name>
   <Type>QString</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>P1</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>cost_category</Name>
   <Type>QString</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>C1</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>abc_class</Name>
   <Action>UseAlternateValue</Action>
   <AltValue>A</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>group_mps_mrp_orders</Name>
   <Type>int</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>1</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>wo_supplied_at_site</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>create_wos</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>create_prs</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>create_soprs</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>create_sopos</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>dropship</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>ranking</Name>
   <Type>int</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>1</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>stocked</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>allow_automatic_updates</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>cycl_cnt_freq</Name>
   <Type>int</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>1</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>event_fence</Name>
   <Type>int</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>10</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>multiple_location_control</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>user_defined_location</Name>
   <Type>QString</Type>
   <Action>UseEmptyString</Action>
  </CSVMapField>
  <CSVMapField>
   <Name>location_comment</Name>
   <Type>QString</Type>
   <Action>UseEmptyString</Action>
  </CSVMapField>
  <CSVMapField>
   <Name>disallow_blank_wip_locations</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>enforce_order_parameters</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>reorder_level</Name>
   <Type>double</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>order_up_to</Name>
   <Type>double</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>minimum_order</Name>
   <Type>double</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>maximum_order</Name>
   <Type>double</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>order_multiple</Name>
   <Type>double</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>enforce_on_manual_orders</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>first_group</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>mps_time_fence</Name>
   <Type>int</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>lead_time</Name>
   <Type>int</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>safety_stock</Name>
   <Type>double</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>0</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>perishable</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>require_warranty</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
  <CSVMapField>
   <Name>auto_register</Name>
   <Type>bool</Type>
   <Action>UseAlternateValue</Action>
   <AltValue>FALSE</AltValue>
  </CSVMapField>
 </CSVMap>
</CSVAtlas>
